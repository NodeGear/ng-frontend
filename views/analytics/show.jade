extends ../layout

block content
	mixin navbar(2)
	
	.container
		.panel.panel-default
			.panel-heading
				h1.panel-title Global App Analytics
			.panel-body
				p Here are global analytics sorted in descending order (time finished request)
				p Showing 
					code= analytics.length
					|  requests, average 
					code= average
					| ms per request
				p
					code= allTotal
					|  total requests, average 
					code= allAverage
					| ms per request
			table.table
				thead
					tr
						th Start
						th End
						th Time took
						th Hostname
						th Request
						th URL
						th StatusCode
						th Drone
						th 404?
				tbody
					for row in analytics
						tr
							td
								= row.start.getDate()
								| /
								= row.start.getMonth()+1
								|  
								= row.start.getHours()
								| :
								= row.start.getMinutes()
								|  
								= row.start.getSeconds()
								| :
								= row.start.getMilliseconds()
								| ms
							td
								= row.end.getDate()
								| /
								= row.end.getMonth()+1
								|  
								= row.end.getHours()
								| :
								= row.end.getMinutes()
								|  
								= row.end.getSeconds()
								| :
								= row.end.getMilliseconds()
								| ms
							td= row.end - row.start
								| ms
							td= row.hostname
							td= row.request
							td= row.url
							td= row.statusCode
							td
								if row.drone
									a(href="/app/"+row.drone._id)= row.drone.name
							td
								if row.found
									| Nah
								else
									| YES