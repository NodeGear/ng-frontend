div(ng-controller="PaymentMethodsController" ng-init="init('#{token}', '#{stripe_pub}')" ng-cloak)
	.row
		.col-sm-12.col-md-12.col-lg-12.col-xs-12
			h2.page-header Payment Methods
				button.btn.btn-success.pull-right(ng-click="addCard()" ng-disabled="cards.length == 0 || showEditCard") New Payment Method
	
	.row
		.col-md-12.col-sm-12.col-lg-12.col-xs-12
			table.table.table-striped(ng-show="cards.length > 0")
				thead
					tr
						th Card Name
						th Number
						th
				tbody
					tr(ng-repeat="card in cards")
						td {{ card.name }}
						td XXXX XXXX XXXX {{ card.last4 }}
						td
							.btn-group.pull-right
								button.btn.btn-xs.btn-default(ng-click="selectCard(card)") Edit
								button.btn.btn-xs.btn-default(ng-click="makeDefault(card)" ng-disabled="card.default") Make Default
								button.btn.btn-xs.btn-danger(ng-click="deleteCard(card)") Delete
	
	.row
		.col-md-12.col-sm-12.col-lg-12.col-xs-12
			p(ng-show="cards.length == 0") You have no cards.
	
	.row(ng-show="cards.length == 0 || showEditCard")
		.col-md-12.col-sm-12.col-lg-12.col-xs-12
			.row
				.col-lg-7.col-md-7.col-sm-7.col-lg-offset-4.col-md-offset-4.col-sm-offset-4
					h3(ng-show="card._id.length == 0") Add a Card
					h3(ng-show="card._id.length > 0") Edit Card
					br
					p {{ status }}
			form.form-horizontal(name="editCard")
				.form-group
					label.col-md-4.col-lg-4.col-sm-4.control-label(for="card_name") Card Name
					.col-lg-4.col-md-4.col-sm-4
						input#card_name.form-control(type="text" placeholder="e.g. Primary Card, or Credit Card" required ng-model="card.name" ng-disabled="cardFormDisabled")
				br
				.form-group
					label.col-md-4.col-lg-4.col-sm-4.control-label(for="cardholder" ng-style="{ color: card.errors.name }") Cardholder Name
					.col-lg-4.col-md-4.col-sm-4
						input#cardholder.form-control(type="text" placeholder="Cardholder Name" required ng-model="card.cardholder" ng-disabled="cardFormDisabled")
				.form-group
					label.col-md-4.col-lg-4.col-sm-4.control-label(for="card_number" ng-style="{ color: card.errors.number }") Card Number
					.col-lg-4.col-md-4.col-sm-4
						input#card_number.form-control(type="text" placeholder="Your 16 Digit Card Number" required ng-model="card.number" ng-disabled="cardFormDisabled || card._id.length > 0")
				.form-group
					label.col-md-4.col-lg-4.col-sm-4.control-label(for="expiry_date" ng-style="{ color: card.errors.expiry }") Expiry Date
					.col-lg-4.col-md-4.col-sm-4
						input#expiry_date.form-control(type="text" placeholder="Expiration Date | MM/YYYY" required ng-model="card.expiry" ng-disabled="cardFormDisabled || card._id.length > 0")
				.form-group
					label.col-md-4.col-lg-4.col-sm-4.control-label(for="cvc" ng-style="{ color: card.errors.cvc }") CVC
					.col-lg-4.col-md-4.col-sm-4
						input#cvc.form-control(type="text" placeholder="CVC Number (on the back your card)" required ng-model="card.cvc" ng-disabled="cardFormDisabled || card._id.length > 0")
				.form-group
					.col-lg-7.col-md-7.col-sm-7.col-lg-offset-4.col-md-offset-4.col-sm-offset-4
						.checkbox
							label
								input#default(type="checkbox" ng-model="card.default" ng-disabled="cardFormDisabled")
								| Set as Default Payment Method
				.form-group
					.col-lg-7.col-md-7.col-sm-7.col-lg-offset-4.col-md-offset-4.col-sm-offset-4
						button.btn.btn-success(ng-click="saveCard()" ng-hide="cardFormDisabled" ng-disabled="editCard.$invalid") Save Card
						| &nbsp;
						a.btn.btn-default(ng-click="cancelSave()" href="" ng-hide="cardFormDisabled || cards.length == 0") Cancel
